PROCESS_NAME = 'PixelWorlds.exe'
--------
-------- Auto Attach
--------
local autoAttachTimer = nil ---- variable to hold timer object
local autoAttachTimerInterval = 1000 ---- Timer intervals are in milliseconds
local autoAttachTimerTicks = 0 ---- variable to count number of times the timer has run
local autoAttachTimerTickMax = 5000 ---- Set to zero to disable ticks max
local function autoAttachTimer_tick(timer) ---- Timer tick call back
        ---- Destroy timer if max ticks is reached
	if autoAttachTimerTickMax > 0 and autoAttachTimerTicks >= autoAttachTimerTickMax then
		timer.destroy()
	end
        ---- Check if process is running
	if getProcessIDFromProcessName(PROCESS_NAME) ~= nil then
		timer.destroy() ---- Destroy timer
		openProcess(PROCESS_NAME) ---- Open the process
        UDF1.CELabel15.visible = true
	end
	autoAttachTimerTicks = autoAttachTimerTicks + 1 ---- Increase ticks
end
autoAttachTimer = createTimer(getMainForm()) ---- Create timer with the main form as it's parent
autoAttachTimer.Interval = autoAttachTimerInterval ---- Set timer interval
autoAttachTimer.OnTimer = autoAttachTimer_tick ---- Set timer tick call back




local versionnow = getInternet().getURL("https://raw.githubusercontent.com/knottty/whitelist/master/vern")
local version = getInternet().getURL("https://raw.githubusercontent.com/knottty/whitelist/master/fff")
local link = getInternet().getURL("https://raw.githubusercontent.com/knottty/whitelist/master/link")

if versionnow == version then
UDF2.show()
UDF1.BorderStyle = 'bsNone'
control_setColor(UDF1_CEPanel3, 777777) -- 77777 red  777777 green

function autosavenow(t)
  saveTable(getCheatEngineDir().."autosave.ct")
end

autosavetimer=createTimer(nil)
timer_setInterval(autosavetimer, 60*1000) --5 minutes
timer_onTimer(autosavetimer, autosavenow)
timer_setEnabled(autosavetimer, true)










function TableAddFont(path)
   if (type(path)=='string') then
      local font,filename
      font = findTableFile(path);
      if (not font) then
         local file = io.open(path,"r")
         if (not file) then
            error("ERROR loading font");
         else
            file:close();
            filename = path:match(".+\\(.-)$")
            font = findTableFile(filename)
            if (not font) then
               font = createTableFile(filename,path)
            end
         end
      end
      local frmt = (cheatEngineIs64Bit() and "mov edx,#%%d\nmov rcx,#%%d\nxor r8d,r8d\nlea r9d,[count]\ncall AddFontMemResourceEx\nmov [handle],rax" or "lea eax,[count]\npush eax\npush 0\npush #%%d\npush #%%d\ncall AddFontMemResourceEx\nmov [handle],eax")
      local pFont,length = font.stream.memory,font.stream.size
      local sAdd = "alloc(script,128)\nalloc(data,32)\nlabel(count)\nlabel(handle)\nregistersymbol(count)\nregistersymbol(handle)\nregistersymbol(script)\nscript:\n_FORMAT\nret\ndata:\ncount:\ndd -1\nhandle:\ndd -1\ncreatethread(script)"
      sAdd = sAdd:gsub("_FORMAT",frmt):format(length,pFont)
      local status = autoAssemble(sAdd,true);
      if (status) then
         local handle = readIntegerLocal("handle") or 0;
         return handle ~= 0
      end
      return false;
   end
end
TableAddFont("_19718.ttf"); -- example of font I used
TableAddFont("mk.ttf"); -- example of font I used
else
showMessage("pls update hack!")
ShellExecute(link)
closeCE()
end


function UDF2_CEPanel1Click(sender)
text = control_getCaption(UDF2_CEEdit1)
if text == "xD" then
UDF1.show()
UDF2.visile = false
else
control_setCaption(UDF2_CEEdit1, "wrong!")
end
end
function UDF1_CEPanel2MouseDown(sender, button, x, y)
UDF1.DragNow()
end
function UDF1_CEPanel4Click(sender)
pa4=pa4+1
print(pa4)
if pa4==1 then
autoAssemble([[
Player.HitPlayerFromBlock:
db C3
Player.HitPlayerFromAIEnemy:
db C3
]]);
control_setColor(UDF1_CEPanel4, 777777) -- 77777 red  777777 green
end
if pa4==2 then
autoAssemble([[
Player.HitPlayerFromBlock:
db 4C 8B DC
Player.HitPlayerFromAIEnemy:
db 4C 8B DC
]]);
control_setColor(UDF1_CEPanel4, 77777) -- 77777 red  777777 green
pa4=pa4-2
end
end
pa1=0
pa2=0
pa3=0
pa4=0
pa5=0
pa6=0
pa7=0
pa8=0
pa9=0
pa10=0
pa11=0
pa12=0
pa13=0
pa14=0
pa15=0
pa16=0
pa17=0
pa18=0
pa19=0
pa20=0
pa21=0
function UDF1_CELabel1Click(sender)
CloseCE()
end
function UDF1_CEPanel6Click(sender) --fish hack
pa6=pa6+1
print(pa6)
if pa6==1 then
results=AOBScan("F3 0F 10 83 0? 01 00 00 0F 57 F6 0F 2F C6 77 0D 80 BB ?? 01 00 00 00 0F 84 ?? 03 00 00 80 3D ??", "*W-C*X") --поиск
if (results~=nil) then
count=stringlist_getCount(results)
if (count>0) then
for i = 0, (count-1), 1 do
acaddress =stringlist_getString(results,i)
writeBytes(acaddress ,0x90, 0x90, 0x90, 0x90, 0x90, 0x90, 0x90, 0x90) -- замена
end
end
end
control_setColor(UDF1_CEPanel6, 777777) -- 77777 red  777777 green
end
if pa6==2 then
writeBytes(acaddress ,0xF3, 0x0F, 0x10, 0x83, 0x00, 0x01, 0x00, 0x00) -- замена
control_setColor(UDF1_CEPanel6, 77777) -- 77777 red  777777 green
pa6=pa6-2
end
end
function UDF1_CEPanel7Click(sender)--mod fly
pa7=pa7+1
print(pa7)
if pa7==1 then
results=AOBScan("F2 0F 11 87 B4 00 00 00 8B 40 08 89 87 BC 00 00 00 45 84 F6 74 04 C6 47 38 01 F3 41 0F 10 45 00 41 0F 2E C1 0F 8A F1 06 00 00 0F 85 EB 06 00 00 F2 41 0F 10 45 00 F2 0F 11 87 FC 00 00 00 41 8B", "*W-C*X") --поиск
if (results~=nil) then
count=stringlist_getCount(results)
if (count>0) then
for i = 0, (count-1), 1 do
acaddress2 =stringlist_getString(results,i)
writeBytes(acaddress2 ,0x90, 0x90, 0x90, 0x90, 0x90, 0x90, 0x90, 0x90) -- замена
end-- F2 0F 11 87 B4 00 00 00
end
end
control_setColor(UDF1_CEPanel7, 777777) -- 77777 red  777777 green
end
if pa7==2 then
writeBytes(acaddress2 ,0xF2, 0x0F, 0x11, 0x87, 0xB4, 0x00, 0x00, 0x00) -- замена
control_setColor(UDF1_CEPanel7, 77777) -- 77777 red  777777 green
pa7=pa7-2
end
end
function UDF1_CEPanel8Click(sender)--antiwater
pa8=pa8+1
print(pa8)
if pa8==1 then
results=AOBScan("89 83 A4 06 00 00 48 8B 7B 20 48 85 FF 0F 84 2B 0A 00 00 33 C0 48 89 45 B0 89 45 B8 48 8B 05 34 D4 38 02 48 85 C0 75 1C 48 8D 0D E0 DD F6 01 E8 7B CE EB FF 48 85 C0 0F 84 1E 0A 00 00 48 89 05", "*W-C*X") --поиск
if (results~=nil) then
count=stringlist_getCount(results)
if (count>0) then
for i = 0, (count-1), 1 do
acaddress3 =stringlist_getString(results,i)
writeBytes(acaddress3 ,0x90, 0x90, 0x90, 0x90, 0x90, 0x90) -- замена
end-- 89 83 A4 06 00 00
end
end
control_setColor(UDF1_CEPanel8, 777777) -- 77777 red  777777 green
end
if pa8==2 then
writeBytes(acaddress3 ,0x89, 0x83, 0xA4, 0x06, 0x00, 0x00) -- замена
control_setColor(UDF1_CEPanel8, 77777) -- 77777 red  777777 green
pa8=pa8-2
end
end
function UDF1_CEPanel5Click(sender)--light
pa9=pa9+1
print(pa9)
if pa9==1 then
results=AOBScan("F3 0F 10 73 7C 0F 2F F7 0F 86 F9 00 00 00 33 C9 E8 FF 77 49 01 F3 0F 5C F0 F3 0F 11 73 7C 0F 2F FE 72 3C 48 8B 05 F2 9B 24 02 48 8B 88 B8 00 00 00 48 8B 41 38 48 85 C0 0F 84 FD 00 00 00 48 8B", "*W-C*X") --поиск
if (results~=nil) then
count=stringlist_getCount(results)
if (count>0) then
for i = 0, (count-1), 1 do
acaddress4 =stringlist_getString(results,i)
writeBytes(acaddress4 ,0x90, 0x90, 0x90, 0x90, 0x90) -- замена
end--F3 0F 10 73 7C 0F 2F F7 0F 86 F9 00 00 00 33 C9 E8 FF 77 49 01 F3 0F 5C F0 F3 0F 11 73 7C 0F 2F FE 72 3C 48 8B 05 F2 9B 24 02 48 8B 88 B8 00 00 00 48 8B 41 38 48 85 C0 0F 84 FD 00 00 00 48 8B
end--F3 0F 10 73 7C
end
control_setColor(UDF1_CEPanel5, 777777) -- 77777 red  777777 green
end
if pa9==2 then
writeBytes(acaddress4 ,0xF3, 0x0F, 0x10, 0x73, 0x7C) -- замена
control_setColor(UDF1_CEPanel5, 77777) -- 77777 red  777777 green
pa9=pa9-2
end
end
function UDF1_CEPanel9Click(sender)--speed
pa10=pa10+1
print(pa10)
if pa10==1 then
results=AOBScan("40 53 48 83 EC 40 48 63 D9 80 3D B3 AE 30 02 00 75 50 48 8B 05 37 9A 30 02 48 63 90 B8 00 00 00 48 8B 05 01 9A 30 02 8B 8C 02 68 1D 01 00 45 33 C0 4C 89 44 24 20 4C 89 44 24 28 4C 89 44 24 30", "*W-C*X") --поиск
if (results~=nil) then
count=stringlist_getCount(results)
if (count>0) then
for i = 0, (count-1), 1 do
acaddress5 =stringlist_getString(results,i)
writeBytes(acaddress5 ,0xC3) -- замена
end--4    40 53       40 48 63 D9 80 3D B3 AE 30 02 00 75 50 48 8B 05 37 9A 30 02 48 63 90 B8 00 00 00 48 8B 05 01 9A 30 02 8B 8C 02 68 1D 01 00 45 33 C0 4C 89 44 24 20 4C 89 44 24 28 4C 89 44 24 30end--F3 0F 10 73 7C
end
control_setColor(UDF1_CEPanel9, 777777) -- 77777 red  777777 green
end
end
if pa10==2 then
writeBytes(acaddress5 ,0x40, 0x53) -- замена
control_setColor(UDF1_CEPanel9, 77777) -- 77777 red  777777 green
pa10=pa10-2
end
end
function UDF1_CEPanel10Click(sender)-- entity
pa11=pa11+1
print(pa11)
if pa11==1 then
results=AOBScan("48 83 EC 28 80 79 6C 00 74 38 4C 8B 41 28 4D 85 C0 74 2F 48 63 41 30 85 C0 78 27 41 3B 40 18 7D 21 73 2A 49 8B 4C C0 20 48 85 C9 74 1A 48 8B 01 4C 8B 88 B8 01 00 00 48 83 C4 28 48 FF A0 B0 01", "*W-C*X") --поиск
if (results~=nil) then
count=stringlist_getCount(results)
if (count>0) then
for i = 0, (count-1), 1 do
acaddress6 =stringlist_getString(results,i)
writeBytes(acaddress6 ,0xC3) -- замена
end--4    40 53       40 48 63 D9 80 3D B3 AE 30 02 00 75 50 48 8B 05 37 9A 30 02 48 63 90 B8 00 00 00 48 8B 05 01 9A 30 02 8B 8C 02 68 1D 01 00 45 33 C0 4C 89 44 24 20 4C 89 44 24 28 4C 89 44 24 30end--F3 0F 10 73 7C
end--48 83 EC 28
control_setColor(UDF1_CEPanel10, 777777) -- 77777 red  777777 green
end
if pa11==2 then
writeBytes(acaddress6 ,0x48, 0x83, 0xEC, 0x28) -- замена
control_setColor(UDF1_CEPanel10, 77777) -- 77777 red  777777 green
pa11=pa11-2
end
end
end
function UDF1_CEPanel11Click(sender)
pa12=pa12+1
print(pa12)
if pa12==1 then
autoAssemble([[
GameAssembly.dll+29DEE3:
db 90 90
]]);
end
control_setColor(UDF1_CEPanel11, 777777) -- 77777 red  777777 green
if pa12==2 then
autoAssemble([[
GameAssembly.dll+29DEE3:
db FF D0
]]);
control_setColor(UDF1_CEPanel11, 77777) -- 77777 red  777777 green
pa12=pa12-2
end
end

